# To Do

- [x] Cleanup sprite pipeline
- [x] Support multiple atlases
- [x] Text rendering
- [x] Convert all positions to floats
- [x] Should scale be automatically multiplied by scale_factor if position cant?
- [x] Supply all four points in GpuSprite
- [x] Allow rotating sprites
- [ ] Look into anti aliasing
- [ ] ~~Matrix stacks?~~
- [x] Color struct with mixing and lab
- [x] Sprite Z-ordering
- [x] Make a button UI element
- [x] Bring back the input handler for immediate mode style ui layouts
- [x] In the background of the title screen have faded versions of all the tiles be flying down
- [x] Some kinda screen that always runs its handlers
- [x] Fade to accent color on hover
- [x] Build out text renderer
- [ ] Fix scale anchor bug
- [x] Figure out how to pass an app struct around
- [x] Strongly typed asset references
- [x] Split tile_map and tile_picker into ui/game components
- [x] Implement beam logic
- [ ] Figure out how to apply custom shader effects?
- [x] Fix galvo input logic
- [x] Dont overwrite galvo mirror state when rotating
- [ ] Fix delay gate rendering z order
- [x] Create z_order consts for layers
- [x] Actual Infante Boards
  - [x] Use new rendering system
  - [x] Use hash map for tile storage
  - [x] Destroy beams after traveling too far
- [ ] Cleanup coordinate systems
- [x] Zoom around the cursor position
- [x] Sandbox save selection screen
- [ ] Allow managing (creating, deleting) saves
- [x] Saves should have a header at the start
  - Save name
  - Playtime
  - Last open date
- [x] Copy & paste tiles
  - [x] Allow making selections
  - [x] Allow adding and subtracting from selections
  - [x] Add some selection operations
    - [x] Delete
    - [x] Duplicate into holding
    - [x] Move into holding
- [x] Undo
  - [x] Store list of modifications
- [ ] Add sticky notes with text
- [ ] ~~Persist window size~~
- [x] Autosave interval
- [ ] Improve FPS
  - [ ] Benchmarking system
- [x] Don't overstep pan/zoom goals during lag spikes
- [ ] Engine key chord pressed
- [x] Stop simulation on delete, cut, or copy
- [ ] Cleanup history track_once vs track_many
- [x] Pop screen & save/free simulation on ESC
- [x] Allow changing simulation speed
  - [x] Decouple simulation from renderer
- [x] Allow rotating copied selections
- [ ] Fix simulation bug when two galvos are pointed at the same mirror
- [x] Render the little light pixel on active emitters
- [ ] Visual feedback for test cases
- [ ] Blueprint system
  - [ ] Allow saving and loading premade-structures in-game
  - [ ] Allow importing and exporting them as base64 encoded strs
- [ ] Dont overwrite when placing tile normally
- [ ] Dont allow interacting with protected tiles through selections
- [x] Use shift to reverse rotation direction
- [ ] Cleanup selection renderer with holes
- [ ] Bias scale to integer zoom levels when at small zooms
- [ ] Detect failed test cases
- [ ] Allow disabling cycle detection for pluse based solutions
- [ ] Experiment with animation icon?
- [x] Allow labeling emitters / outputs / tiles in general?
- [ ] Splitters take input from all sides to avoid non-determistic behavior when used as or-gates
- [x] Allow canceling clicks through the graphics context
- [x] Show current test case in level panel when simulating in test mode
- [ ] Start testing at currently open level panel test case, looping around at the end
- [x] Make level panel rendering more efficient by stretching sprites
- [ ] Cleanup public fields in engine that should be read only
- [x] Allow disabling tiles in level def
- [ ] Price system & ranking
- [ ] Use ron for config file?
- [ ] Add a solution latency metric
